<div class="w-[90vw] md:w-[500px]">
  <h2 class="text-xl font-semibold mb-6">
    {{ isEditMode ? "Editar Intenção" : "Nova Intenção" }}
  </h2>

  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-4">
    <div>
      <label class="block mb-1 font-medium text-sm">Nome</label>
      <input
        type="text"
        formControlName="name"
        class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"
        [class.border-red-500]="name?.invalid && name?.touched"
      />

      @if (name?.invalid && name?.touched) {

      <div class="text-red-500 text-xs mt-1">
        @if (name?.errors?.['required']) {
        <span>Campo obrigatório.</span>
        } @if (name?.errors?.['maxLength']) {
        <span>Máximo de 100 caracteres.</span>
        }
      </div>
      }
    </div>

    <div>
      <label class="block mb-1 font-medium text-sm">Descrição</label>
      <textarea
        formControlName="description"
        rows="4"
        class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"
        [class.border-red-500]="description?.invalid && description?.touched"
      ></textarea>

      @if (description?.invalid && description?.touched) {
      <div class="text-red-500 text-xs mt-1">
        @if (description?.errors?.['required']) {
        <span>Campo obrigatório.</span>
        } @if (description?.errors?.['maxLength']) {
        <span>Máximo de 300 caracteres.</span>
        }
      </div>
      }
    </div>

    <div>
      <label class="block mb-1 font-medium text-sm">Tipo de Serviço</label>
      <p-dropdown
        [options]="serviceTypes"
        formControlName="serviceTypeId"
        optionLabel="name"
        optionValue="id"
        placeholder="Selecione o Tipo de Serviço"
        [loading]="isLoading"
        [class.border-red-500]="
          serviceTypeId?.invalid && serviceTypeId?.touched
        "
        styleClass="w-full border rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500 shadow-none"
      ></p-dropdown>

      @if (serviceTypeId?.invalid && serviceTypeId?.touched) {
      <div class="text-red-500 text-xs mt-1">
        @if (serviceTypeId?.errors?.['required']) {
        <span>Campo obrigatório.</span>
        }
      </div>
      }
    </div>

    <div>
      <label class="block mb-1 font-medium text-sm">Área Limite</label>
      <input
        type="number"
        formControlName="limit_Area"
        class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"
        [class.border-red-500]="limit_Area?.invalid && limit_Area?.touched"
      />

      @if (limit_Area?.invalid && limit_Area?.touched) {
      <div class="text-red-500 text-xs mt-1">
        @if (limit_Area?.errors?.['required']) {
        <span>Campo obrigatório.</span>
        } @if (limit_Area?.errors?.['min']) {
        <span>O valor deve ser maior que 0.</span>
        }
      </div>
      }
    </div>

    <div>
      <label class="block mb-1 font-medium text-sm">Preço Diário</label>
      <input
        type="number"
        formControlName="daily_Price"
        class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-500"
        [class.border-red-500]="daily_Price?.invalid && daily_Price?.touched"
      />

      @if (daily_Price?.invalid && daily_Price?.touched) {
      <div class="text-red-500 text-xs mt-1">
        @if (daily_Price?.errors?.['required']) {
        <span>Campo obrigatório.</span>
        } @if (daily_Price?.errors?.['min']) {
        <span>O valor deve ser maior ou igual a 0.</span>
        }
      </div>
      }
    </div>

    <div class="flex items-center gap-3">
      <input
        type="checkbox"
        formControlName="urbanConfrontation"
        class="h-4 w-4"
      />
      <label class="text-sm">Confrontação Urbana</label>
    </div>

    <div class="flex items-center gap-3">
      <input
        type="checkbox"
        formControlName="ruralConfrontation"
        class="h-4 w-4"
      />
      <label class="text-sm">Confrontação Rural</label>
    </div>

    <div class="flex justify-end gap-3 mt-6">
      <button
        type="button"
        (click)="close()"
        class="px-4 py-2 rounded-lg text-sm text-gray-700 hover:text-black"
      >
        Cancelar
      </button>
      <button
        type="submit"
        class="px-5 py-2 rounded-lg bg-emerald-700 text-white text-sm hover:bg-emerald-800"
      >
        {{ isEditMode ? "Salvar" : "Criar" }}
      </button>
    </div>
  </form>
</div>
